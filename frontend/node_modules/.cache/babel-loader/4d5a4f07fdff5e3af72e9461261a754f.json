{"ast":null,"code":"var _jsxFileName = \"E:\\\\registration\\\\frontend\\\\src\\\\components\\\\account\\\\MachineCredit.js\";\nimport React from 'react';\nimport Autocomplete from \"../entry/AutoComplete\";\nimport './account.css';\nimport Popup from \"reactjs-popup\";\n\nclass MachineCredit extends React.Component {\n  // Fetch machine list from server\n  //form Handler Submitting\n  // Set final showing rows of table currentWork\n  constructor(props) {\n    super(props);\n\n    this.fetchProduct = async () => {\n      try {\n        const responsePartyList = await fetch(\"http://127.0.0.1:8000/list-of-machineparty/\");\n        const jsonPartyList = await responsePartyList.json();\n        jsonPartyList.map(item => this.state.partyNamesFromApi.push(item.name));\n        this.state.partyList = jsonPartyList;\n      } catch {}\n    };\n\n    this.onSubmit = async () => {\n      const responsCreditDetail = await fetch('http://127.0.0.1:8000/machine-party-credit/', {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          \"party\": this.state.selectedParty\n        })\n      });\n      const jsonCreditDetail = await responsCreditDetail.json();\n\n      if (jsonCreditDetail.credits.length != 0) {\n        this.setState({\n          minDate: jsonCreditDetail.credits[0].date\n        });\n        this.setState({\n          maxDate: jsonCreditDetail.credits.slice(-1)[0].date\n        });\n      }\n\n      this.setState({\n        creditDetail: jsonCreditDetail,\n        input: {\n          display: \"none\"\n        },\n        table: {\n          display: \"block\"\n        }\n      });\n    };\n\n    this.setDateFilter = (item, index) => {\n      if (!this.state.minFilterDate) {\n        this.state.minFilterDate = this.state.minDate;\n      }\n\n      if (!this.state.maxFilterDate) {\n        this.state.maxFilterDate = this.state.maxDate;\n      }\n\n      if (this.state.minFilterDate <= item.date && item.date <= this.state.maxFilterDate) {\n        this.state.currentCredit.push(item);\n      }\n    };\n\n    this.state = {\n      creditDetail: {\n        party: \"\",\n        contact: \"\",\n        village: \"\",\n        crasher: \"\",\n        credits: []\n      },\n      minDate: null,\n      maxDate: null,\n      minFilterDate: null,\n      maxFilterDate: null,\n      startDate: null,\n      endDate: null,\n      currentCredit: [],\n      partyList: {},\n      selectedParty: \"\",\n      partyNamesFromApi: [],\n      input: {\n        display: \"block\"\n      },\n      table: {\n        display: \"none\"\n      }\n    };\n    this.fetchProduct = this.fetchProduct.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.setDateFilter = this.setDateFilter.bind(this);\n    this.fetchProduct();\n  }\n\n  render() {\n    //Clean old data\n    this.state.currentCredit = []; //  fill current credit\n\n    this.state.creditDetail.credits.forEach(this.setDateFilter);\n    return React.createElement(\"div\", {\n      id: \"mainDiv\",\n      className: \"d-flex justify-content-center align-items-center scrollingSection\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"tableShow\",\n      style: this.state.table,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"upperHeader row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"blockquote\", {\n      className: \"commonFont blockquote text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"mb-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, this.state.creditDetail.party)))), React.createElement(\"div\", {\n      className: \"col-sm-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"blockquote\", {\n      className: \"commonFont blockquote text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"mb-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, this.state.creditDetail.contact))), React.createElement(\"div\", {\n      className: \"col-sm-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"blockquote\", {\n      className: \"commonFont blockquote text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"mb-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, this.state.creditDetail.village))), React.createElement(\"div\", {\n      className: \"col-sm-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"date\",\n      min: this.state.minDate,\n      max: this.state.maxDate,\n      onChange: e => {\n        this.setState({\n          minFilterDate: e.target.value\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-sm-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"date\",\n      min: this.state.minDate,\n      max: this.state.maxDate,\n      onChange: e => {\n        this.setState({\n          maxFilterDate: e.target.value\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"highTable\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(Popup, {\n      modal: true,\n      trigger: React.createElement(\"button\", {\n        className: \"bg-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, \"Party\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, this.state.creditDetail.party), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, this.state.creditDetail.contact), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, this.state.creditDetail.village), React.createElement(\"input\", {\n      type: \"date\",\n      min: this.state.minDate,\n      max: this.state.maxDate,\n      onChange: e => {\n        this.setState({\n          minFilterDate: e.target.value\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"date\",\n      min: this.state.minDate,\n      max: this.state.maxDate,\n      onChange: e => {\n        this.setState({\n          maxFilterDate: e.target.value\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"lowerHeader\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"table table-borderd tablePart\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      className: \"thead-dark\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, \"Date\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, \"Credit Amount\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, \"Remark\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, this.state.currentCredit.map(credit => React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, credit.date), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, credit.credit_amount), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, credit.remark))))))), React.createElement(\"form\", {\n      className: \"form-container form-group\",\n      style: this.state.input,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(Autocomplete, {\n      suggestions: this.state.partyNamesFromApi,\n      callbackFromParent: dataFromChild => {\n        this.state.selectedParty = dataFromChild;\n      },\n      placeholderfrom: \"Party name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-outline-dark\",\n      style: this.state.buttonStatus,\n      onClick: e => this.onSubmit(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, \"Save\")));\n  }\n\n}\n\nexport default MachineCredit;","map":{"version":3,"sources":["E:/registration/frontend/src/components/account/MachineCredit.js"],"names":["React","Autocomplete","Popup","MachineCredit","Component","constructor","props","fetchProduct","responsePartyList","fetch","jsonPartyList","json","map","item","state","partyNamesFromApi","push","name","partyList","onSubmit","responsCreditDetail","method","headers","body","JSON","stringify","selectedParty","jsonCreditDetail","credits","length","setState","minDate","date","maxDate","slice","creditDetail","input","display","table","setDateFilter","index","minFilterDate","maxFilterDate","currentCredit","party","contact","village","crasher","startDate","endDate","bind","render","forEach","e","target","value","credit","credit_amount","remark","dataFromChild","buttonStatus"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Autocomplete from \"../entry/AutoComplete\";\r\nimport './account.css';\r\nimport Popup from \"reactjs-popup\";\r\n\r\nclass MachineCredit extends React.Component{\r\n    // Fetch machine list from server\r\n    fetchProduct = async () => {\r\n        try {\r\n            const responsePartyList = await fetch(\r\n                \"http://127.0.0.1:8000/list-of-machineparty/\" \r\n            );\r\n            const jsonPartyList = await responsePartyList.json();\r\n            jsonPartyList.map(item => this.state.partyNamesFromApi.push(item.name));\r\n            this.state.partyList = jsonPartyList;\r\n        }\r\n        catch {\r\n        }\r\n    };\r\n\r\n  //form Handler Submitting\r\n  onSubmit = async () => {\r\n    const responsCreditDetail = await fetch('http://127.0.0.1:8000/machine-party-credit/', {\r\n        method: 'post',\r\n        headers: {'Content-Type':'application/json'},\r\n        body: JSON.stringify({\r\n            \"party\": this.state.selectedParty\r\n        })\r\n    });        \r\n    const jsonCreditDetail = await responsCreditDetail.json();\r\n\r\n    if(jsonCreditDetail.credits.length!=0)\r\n    {\r\n        this.setState({\r\n            minDate: jsonCreditDetail.credits[0].date\r\n        });\r\n        this.setState({\r\n            maxDate: jsonCreditDetail.credits.slice(-1)[0].date    \r\n        });\r\n    } \r\n    this.setState({\r\n        creditDetail: jsonCreditDetail,\r\n        input:{\r\n            display: \"none\"\r\n        },\r\n        table:{\r\n            display: \"block\"\r\n        }\r\n    });\r\n  };\r\n\r\n  \r\n    // Set final showing rows of table currentWork\r\n    setDateFilter = (item, index) => {\r\n        if(!this.state.minFilterDate){\r\n            this.state.minFilterDate= this.state.minDate;\r\n        }\r\n        if(!this.state.maxFilterDate){\r\n            this.state.maxFilterDate= this.state.maxDate;\r\n        }\r\n        if(this.state.minFilterDate <= item.date && item.date <= this.state.maxFilterDate){\r\n            this.state.currentCredit.push(item);\r\n        }\r\n    }\r\n\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state= {\r\n            creditDetail: {\r\n                party: \"\",\r\n                contact: \"\",\r\n                village: \"\",\r\n                crasher: \"\",\r\n                credits: []\r\n            },\r\n            minDate: null,\r\n            maxDate: null,\r\n            minFilterDate: null,\r\n            maxFilterDate: null,\r\n            startDate: null,\r\n            endDate: null,\r\n            currentCredit: [],\r\n            partyList: {},\r\n            selectedParty: \"\",\r\n            partyNamesFromApi: [],\r\n            input:{\r\n                display: \"block\"\r\n            },\r\n            table:{\r\n                display: \"none\"\r\n            }\r\n        }\r\n        \r\n        this.fetchProduct= this.fetchProduct.bind(this);\r\n        this.onSubmit= this.onSubmit.bind(this);\r\n        this.setDateFilter= this.setDateFilter.bind(this);\r\n        this.fetchProduct();\r\n    }\r\n    render(){\r\n        //Clean old data\r\n        this.state.currentCredit=[];\r\n        \r\n        //  fill current credit\r\n        this.state.creditDetail.credits.forEach(this.setDateFilter);\r\n\r\n        return(\r\n            <div id=\"mainDiv\" className=\"d-flex justify-content-center align-items-center scrollingSection\">\r\n                <div className=\"tableShow\" style={this.state.table}>\r\n                    <div className=\"upperHeader row\">\r\n                        <div className=\"col-sm-2\">\r\n                            <blockquote className=\"commonFont blockquote text-center\">\r\n\t\t\t\t\t\t\t\t<p className=\"mb-0\"><b>{this.state.creditDetail.party}</b></p>\r\n\t\t\t\t\t\t\t</blockquote>                        \r\n                        </div>\r\n                        <div className=\"col-sm-2\">\r\n                            <blockquote className=\"commonFont blockquote text-center\">\r\n\t\t\t\t\t\t\t\t<p className=\"mb-0\">{this.state.creditDetail.contact}</p>\r\n\t\t\t\t\t\t\t</blockquote>                        \r\n                        </div>\r\n                        <div className=\"col-sm-2\">\r\n                            <blockquote className=\"commonFont blockquote text-center\">\r\n\t\t\t\t\t\t\t\t<p className=\"mb-0\">{this.state.creditDetail.village}</p>\r\n\t\t\t\t\t\t\t</blockquote>                        \r\n                        </div>\r\n                        <div className=\"col-sm-3\">\r\n                            <input type=\"date\" min={this.state.minDate} max={this.state.maxDate} onChange={e => {\r\n                                this.setState({\r\n                                    minFilterDate: e.target.value\r\n                                });\r\n                            }}/>\r\n                        </div>\r\n                        <div className=\"col-sm-3\">\r\n                            <input type=\"date\" min={this.state.minDate} max={this.state.maxDate} onChange={e => {\r\n                                this.setState({\r\n                                    maxFilterDate: e.target.value\r\n                                });\r\n                            }}/>\r\n                        </div>\r\n                    </div>\r\n\t\t\t\t\t<div className=\"highTable\">\r\n\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{/*Party and filter popup*/}\r\n\t\t\t\t\t\t\t<Popup modal trigger={\r\n\t\t\t\t\t\t\t\t<button className=\"bg-primary\">Party</button>\r\n\t                        } \r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<h4>{this.state.creditDetail.party}</h4>\r\n\t\t\t\t\t\t\t\t<h4>{this.state.creditDetail.contact}</h4>\r\n\t\t\t\t\t\t\t\t<h4>{this.state.creditDetail.village}</h4>\r\n\t\t\t\t\t\t\t\t<input type=\"date\" min={this.state.minDate} max={this.state.maxDate} onChange={e => {\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\tminFilterDate: e.target.value\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}}/>\r\n\r\n\t\t\t\t\t\t\t\t<input type=\"date\" min={this.state.minDate} max={this.state.maxDate} onChange={e => {\r\n\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\tmaxFilterDate: e.target.value\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}}/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</Popup>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"lowerHeader\">\r\n\t\t\t\t\t\t<table className=\"table table-borderd tablePart\">\r\n\t\t\t\t\t\t\t<thead className=\"thead-dark\">\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t<th>Date</th>\r\n\t\t\t\t\t\t\t\t\t<th>Credit Amount</th>\r\n\t\t\t\t\t\t\t\t\t<th>Remark</th>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t{this.state.currentCredit.map((credit) => (\r\n\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t<td>{credit.date}</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>{credit.credit_amount}</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>{credit.remark}</td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n                <form\r\n                    className=\"form-container form-group\"\r\n                    style={this.state.input}\r\n                >\r\n                        <Autocomplete\r\n                            suggestions={this.state.partyNamesFromApi}\r\n                            callbackFromParent={dataFromChild => {\r\n                            this.state.selectedParty = dataFromChild;\r\n                            }}\r\n                            placeholderfrom={\"Party name\"}\r\n                        />\r\n                        <br />\r\n                        <br />\r\n                        <button\r\n                            type=\"button\"\r\n                            className=\"btn btn-outline-dark\"\r\n                            style={this.state.buttonStatus}\r\n                            onClick={e => this.onSubmit()}>\r\n                        Save\r\n                        </button>\r\n                </form>\r\n            </div>    \r\n        );\r\n    }\r\n}\r\n\r\nexport default MachineCredit;"]},"metadata":{},"sourceType":"module"}